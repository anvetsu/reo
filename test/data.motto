users:tab(['id 'name]
          [til(10)
           ["Hero" "Dunn" "Sue" "Chi"
            "Thor" "Clive" "Hicks" "Devin"
            "Kate" "Klein"]])
friendships:[[0 1] [0 2] [1 2] [1 3] [2 3] [3 4] [4 5] [5 6] [5 7] [6 8] [7 8] [8 9]]

friends:fn(i) truths(map(fn(x) if { fst(x) = i snd(x)
                                    snd(x) = i fst(x) }
                          friendships))
allfriends:map(friends til(count(users('name))))

"Users with friends" uwf:club(users, tab(['friends] [allfriends]))
names:uwf('name)
cntfrnds:fn(user) { i:pos(names user) count(nth(uwf('friends) i)) }
"Total connections" tcs:sum(map(cntfrnds, names))
"Average connections" avgcns:tcs/count(names)
"User IDs with number of connections" uconns:map(fn(i frnds) [i count(frnds)],
                                                 til(count(names)), uwf('friends))
sorted_uconns:sort(fn(x y) snd(x) > snd(y), uconns)

